{% extends "base.html" %}
{% block title %}Panel de ingreso{% endblock %}

{% block content %}
<div class="row g-4">
  <!-- Sidebar -->
  <div class="col-lg-3">
    <div class="card sticky-top" style="top:6rem">
      <div class="card-body p-2">
        <div class="nav nav-pills flex-column gap-1">
          <!-- Base -->
          <div class="px-3 pt-2 text-muted small">Módulos base</div>
          <a class="nav-link {% if tab=='censo' %}active{% endif %}" href="{{ url_for('panel', tab='censo') }}">Censo</a>
          <a class="nav-link {% if tab=='eventos' %}active{% endif %}" href="{{ url_for('panel', tab='eventos') }}">Eventos de seguridad</a>
          <a class="nav-link {% if tab=='duplicidades' %}active{% endif %}" href="{{ url_for('panel', tab='duplicidades') }}">Duplicidades</a>
          <a class="nav-link {% if tab=='encuesta' %}active{% endif %}" href="{{ url_for('panel', tab='encuesta') }}">Encuesta de satisfacción</a>
          <a class="nav-link {% if tab=='atencion' %}active{% endif %}" href="{{ url_for('panel', tab='atencion') }}">Atención al público</a>

          <!-- Extra -->
          <div class="px-3 pt-3 text-muted small">Módulos extra</div>
          <a class="nav-link {% if tab=='robos' %}active{% endif %}" href="{{ url_for('panel', tab='robos') }}">Robos y hurtos</a>
          <a class="nav-link {% if tab=='miscelaneo' %}active{% endif %}" href="{{ url_for('panel', tab='miscelaneo') }}">Misceláneo</a>
          <a class="nav-link {% if tab=='desviaciones' %}active{% endif %}" href="{{ url_for('panel', tab='desviaciones') }}">Desviaciones</a>
          <a class="nav-link {% if tab=='solicitud_ot' %}active{% endif %}" href="{{ url_for('panel', tab='solicitud_ot') }}">Solicitud y OT</a>
          <a class="nav-link {% if tab=='reclamos' %}active{% endif %}" href="{{ url_for('panel', tab='reclamos') }}">Reclamos de usuarios</a>

          <!-- Nuevos -->
          <div class="px-3 pt-3 text-muted small">Nuevos</div>
          <a class="nav-link {% if tab=='alarmas' %}active{% endif %}" href="{{ url_for('panel', tab='alarmas') }}">Activación de alarma</a>
          <a class="nav-link {% if tab=='extensiones' %}active{% endif %}" href="{{ url_for('panel', tab='extensiones') }}">Extensión / Excepción</a>
          <a class="nav-link {% if tab=='onboarding' %}active{% endif %}" href="{{ url_for('panel', tab='onboarding') }}">Registro onboarding</a>
          <a class="nav-link {% if tab=='apertura' %}active{% endif %}" href="{{ url_for('panel', tab='apertura') }}">Apertura de habitación</a>
          <a class="nav-link {% if tab=='cumplimiento' %}active{% endif %}" href="{{ url_for('panel', tab='cumplimiento') }}">Cumplimiento EECC</a>

          <!-- Navegación -->
          <div class="px-3 pt-3 text-muted small">Navegación</div>
          <a class="nav-link" href="{{ url_for('registros') }}">Registros</a>
          <a class="nav-link" href="{{ url_for('dashboard') }}">Dashboard</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Main -->
  <div class="col-lg-9">

    {# Helper: bloque de acciones por módulo (plantilla + import) #}
    {% macro acciones(entity) -%}
      <div class="d-flex flex-wrap gap-2 mb-3">
        <a class="btn btn-soft btn-sm" href="{{ url_for('template_xlsx', entity=entity) }}">Descargar plantilla</a>
        <form method="post" action="{{ url_for('import_xlsx', entity=entity) }}" enctype="multipart/form-data" class="d-inline-flex gap-2">
          <input type="file" class="form-control form-control-sm" name="file" accept=".xlsx" required>
          <button class="btn btn-primary btn-sm" type="submit">Importar</button>
        </form>
      </div>
    {%- endmacro %}

    {# ========================= CENSO ========================= #}
    {% if tab=='censo' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Censo</h5>
        {{ acciones('censo') }}
        <form method="post" action="{{ url_for('panel', tab='censo') }}">
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Fecha</label>
              <input type="date" name="fecha" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Censo día</label>
              <input type="number" name="censo_dia" class="form-control" min="0" placeholder="0">
            </div>
            <div class="col-md-3">
              <label class="form-label">Censo noche</label>
              <input type="number" name="censo_noche" class="form-control" min="0" placeholder="0">
            </div>
            <div class="col-md-3">
              <label class="form-label">Total (opcional)</label>
              <input type="number" name="total" class="form-control" min="0" placeholder="(auto)">
            </div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ========================= EVENTOS ========================= #}
    {% if tab=='eventos' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Eventos de seguridad</h5>
        {{ acciones('eventos') }}
        <form method="post" action="{{ url_for('panel', tab='eventos') }}">
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Fecha</label>
              <input type="date" name="fecha" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Horario</label>
              <input type="text" name="horario" class="form-control" placeholder="Mañana/Tarde/Noche o HH:MM" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">Nombre del afectado</label>
              <input type="text" name="nombre_afectado" class="form-control">
            </div>
            <div class="col-md-6">
              <label class="form-label">Qué ocurrió</label>
              <textarea name="que_ocurrio" class="form-control" required></textarea>
            </div>
            <div class="col-md-6">
              <label class="form-label">Acción</label>
              <textarea name="accion" class="form-control"></textarea>
            </div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ========================= DUPLICIDADES ========================= #}
    {% if tab=='duplicidades' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Duplicidades</h5>
        {{ acciones('duplicidades') }}
        <form method="post" action="{{ url_for('panel', tab='duplicidades') }}">
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Semana</label>
              <select name="semana" class="form-select" required>
                <option value="">-- Elegir --</option>
                {% for num, r in week_map.items()|sort %}
                  <option value="{{ num }}">{{ num }} ({{ r[0] }} → {{ r[1] }})</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Fecha</label>
              <input type="date" name="fecha" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">ID</label>
              <input type="text" name="id" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">Empresa contratista</label>
              <input type="text" name="empresa_contratista" class="form-control">
            </div>

            <div class="col-md-6"><label class="form-label">Descripción Problema</label><textarea name="descripcion_problema" class="form-control"></textarea></div>
            <div class="col-md-3"><label class="form-label">Tipo de riesgo</label><input type="text" name="tipo_riesgo" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Pabellón</label><input type="text" name="pabellon" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Habitación</label><input type="text" name="habitacion" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Ingresar contacto</label><input type="text" name="ingresar_contacto" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Nombre usuario</label><input type="text" name="nombre_usuario" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Responsable</label><input type="text" name="responsable" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Estatus</label><input type="text" name="estatus" class="form-control" placeholder="Abierto/Cerrado"></div>
            <div class="col-md-3"><label class="form-label">Notificación usuario</label><input type="text" name="notificacion_usuario" class="form-control"></div>
            <div class="col-md-6"><label class="form-label">Plan de acción</label><input type="text" name="plan_accion" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Fecha cierre</label><input type="date" name="fecha_cierre" class="form-control"></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ========================= ENCUESTA ========================= #}
    {% if tab=='encuesta' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Encuesta de satisfacción</h5>
        {{ acciones('encuesta') }}
        <form method="post" action="{{ url_for('panel', tab='encuesta') }}">
          <div class="row g-3">
            <div class="col-md-4">
              <label class="form-label">Fecha y hora</label>
              <input type="datetime-local" name="fecha_hora" class="form-control" required>
            </div>
          </div>
          <div class="row g-3 mt-1">
            {% for i in range(1,6) %}
            <div class="col-md-6">
              <label class="form-label">Q{{ i }}_RESPUESTA</label>
              <input type="text" name="q{{ i }}_respuesta" class="form-control">
            </div>
            <div class="col-md-6">
              <label class="form-label">Q{{ i }}_PUNTAJE</label>
              <input type="number" name="q{{ i }}_puntaje" class="form-control" min="0" max="10">
            </div>
            {% endfor %}
          </div>
          <div class="mt-3">
            <label class="form-label">Comentarios</label>
            <textarea name="comentarios" class="form-control"></textarea>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ========================= ATENCIÓN ========================= #}
    {% if tab=='atencion' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Atención al público</h5>
        {{ acciones('atencion') }}
        <form method="post" action="{{ url_for('panel', tab='atencion') }}">
          <div class="row g-3">
            <div class="col-md-4"><label class="form-label">Fecha</label><input type="date" name="fecha" class="form-control" required></div>
            <div class="col-md-4"><label class="form-label">Tiempo promedio (mm:ss)</label><input type="text" name="tiempo_promedio" class="form-control" placeholder="mm:ss" pattern="[0-9]{2}:[0-9]{2}"></div>
            <div class="col-md-4"><label class="form-label">Cantidad</label><input type="number" name="cantidad" class="form-control" min="0"></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ========================= ROBOS ========================= #}
    {% if tab=='robos' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Robos y hurtos</h5>
        {{ acciones('robos') }}
        <form method="post" action="{{ url_for('panel', tab='robos') }}">
          <div class="row g-3">
            <div class="col-md-3"><label class="form-label">Fecha</label><input type="date" name="fecha" class="form-control" required></div>
            <div class="col-md-3"><label class="form-label">Hora</label><input type="time" name="hora" class="form-control" required></div>
            <div class="col-md-3"><label class="form-label">Módulo</label><input type="text" name="modulo" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Habitación</label><input type="text" name="habitacion" class="form-control"></div>

            <div class="col-md-4"><label class="form-label">Empresa</label><input type="text" name="empresa" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">Nombre cliente</label><input type="text" name="nombre_cliente" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">RUT</label><input type="text" name="rut" class="form-control"></div>

            <div class="col-md-6"><label class="form-label">Medio del reclamo</label><input type="text" name="medio_reclamo" class="form-control"></div>
            <div class="col-md-6"><label class="form-label">Recepciona</label><input type="text" name="recepciona" class="form-control"></div>

            <div class="col-12"><label class="form-label">Especies</label><textarea name="especies" class="form-control"></textarea></div>
            <div class="col-12"><label class="form-label">Observaciones</label><textarea name="observaciones" class="form-control"></textarea></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ========================= MISCELÁNEO ========================= #}
    {% if tab=='miscelaneo' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Misceláneo</h5>
        {{ acciones('miscelaneo') }}
        <form method="post" action="{{ url_for('panel', tab='miscelaneo') }}">
          <div class="row g-3">
            <div class="col-md-3"><label class="form-label">OT</label><input type="text" name="ot" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">División</label><input type="text" name="division" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Área</label><input type="text" name="area" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Lugar</label><input type="text" name="lugar" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Ubicación</label><input type="text" name="ubicacion" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Disciplina</label><input type="text" name="disciplina" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Especialidad</label><input type="text" name="especialidad" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Falla</label><input type="text" name="falla" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Empresa</label><input type="text" name="empresa" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Fecha creación</label><input type="date" name="fecha_creacion" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Fecha inicio</label><input type="date" name="fecha_inicio" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Fecha término</label><input type="date" name="fecha_termino" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Fecha aprobación</label><input type="date" name="fecha_aprobacion" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Estado</label><input type="text" name="estado" class="form-control"></div>
            <div class="col-12"><label class="form-label">Comentario</label><textarea name="comentario" class="form-control"></textarea></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ========================= DESVIACIONES ========================= #}
    {% if tab=='desviaciones' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Desviaciones</h5>
        {{ acciones('desviaciones') }}
        <form method="post" action="{{ url_for('panel', tab='desviaciones') }}">
          <div class="row g-3">
            <div class="col-md-3"><label class="form-label">N° Solicitud</label><input type="text" name="n_solicitud" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Fecha</label><input type="date" name="fecha" class="form-control" required></div>
            <div class="col-md-3"><label class="form-label">ID</label><input type="text" name="id" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Empresa contratista</label><input type="text" name="empresa_contratista" class="form-control"></div>

            <div class="col-md-6"><label class="form-label">Descripción problema</label><textarea name="descripcion_problema" class="form-control"></textarea></div>
            <div class="col-md-3"><label class="form-label">Tipo de riesgo</label><input type="text" name="tipo_riesgo" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Tipo de solicitud</label><input type="text" name="tipo_solicitud" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Pabellón</label><input type="text" name="pabellon" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Habitación</label><input type="text" name="habitacion" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Vía solicitud</label><input type="text" name="via_solicitud" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Quién informa</label><input type="text" name="quien_informa" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Riesgo material</label><input type="text" name="riesgo_material" class="form-control"></div>
            <div class="col-md-9"><label class="form-label">Correo destino</label><input type="text" name="correo_destino" class="form-control"></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ========================= SOLICITUD & OT ========================= #}
    {% if tab=='solicitud_ot' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Solicitud y OT de usuario</h5>
        {{ acciones('solicitud_ot') }}
        <form method="post" action="{{ url_for('panel', tab='solicitud_ot') }}">
          <div class="row g-3">
            <div class="col-md-3"><label class="form-label">N° Solicitud</label><input type="text" name="n_solicitud" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Descripción problema</label><input type="text" name="descripcion_problema" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Tipo de solicitud</label><input type="text" name="tipo_solicitud" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Módulo</label><input type="text" name="modulo" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Habitación</label><input type="text" name="habitacion" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Tipo turno</label><input type="text" name="tipo_turno" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Jornada</label><input type="text" name="jornada" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Vía solicitud</label><input type="text" name="via_solicitud" class="form-control"></div>

            <div class="col-md-4"><label class="form-label">Correo usuario</label><input type="text" name="correo_usuario" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">Tipo tarea</label><input type="text" name="tipo_tarea" class="form-control"></div>
            <div class="col-md-2"><label class="form-label">OT</label><input type="text" name="ot" class="form-control"></div>
            <div class="col-md-2"><label class="form-label">Fecha inicio</label><input type="date" name="fecha_inicio" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Estado</label><input type="text" name="estado" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Tiempo respuesta (mm:ss)</label><input type="text" name="tiempo_respuesta" class="form-control" pattern="[0-9]{2}:[0-9]{2}"></div>
            <div class="col-md-3"><label class="form-label">Satisfacción reclamo</label><input type="text" name="satisfaccion_reclamo" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Motivo</label><input type="text" name="motivo" class="form-control"></div>

            <div class="col-12"><label class="form-label">Observación</label><textarea name="observacion" class="form-control"></textarea></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ========================= RECLAMOS ========================= #}
    {% if tab=='reclamos' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Reclamos de usuarios</h5>
        {{ acciones('reclamos') }}
        <form method="post" action="{{ url_for('panel', tab='reclamos') }}">
          <div class="row g-3">
            <div class="col-md-3"><label class="form-label">N° Solicitud</label><input type="text" name="n_solicitud" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Fecha</label><input type="date" name="fecha" class="form-control" required></div>
            <div class="col-md-3"><label class="form-label">ID</label><input type="text" name="id" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Empresa contratista</label><input type="text" name="empresa_contratista" class="form-control"></div>

            <div class="col-md-6"><label class="form-label">Descripción problema</label><textarea name="descripcion_problema" class="form-control"></textarea></div>
            <div class="col-md-3"><label class="form-label">Tipo de solicitud</label><input type="text" name="tipo_solicitud" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Pabellón</label><input type="text" name="pabellon" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Habitación</label><input type="text" name="habitacion" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Vía solicitud</label><input type="text" name="via_solicitud" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Ingresar contacto</label><input type="text" name="ingresar_contacto" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Nombre usuario</label><input type="text" name="nombre_usuario" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Responsable</label><input type="text" name="responsable" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Estatus</label><input type="text" name="estatus" class="form-control" placeholder="Abierto/Cerrado"></div>
            <div class="col-md-3"><label class="form-label">Notificación usuario</label><input type="text" name="notificacion_usuario" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Plan de acción</label><input type="text" name="plan_accion" class="form-control"></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ========================= NUEVOS ========================= #}

    {# ---- Activación de alarma ---- #}
    {% if tab=='alarmas' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Activación de alarma</h5>
        {{ acciones('activacion_alarma') }}
        <form method="post" action="{{ url_for('panel', tab='alarmas') }}">
          <div class="row g-3">
            <div class="col-md-3"><label class="form-label">Módulo</label><input type="text" name="modulo" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">N° Habitación</label><input type="text" name="n_habitacion" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Nombre recepcionista</label><input type="text" name="nombre_recepcionista" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Fecha</label><input type="date" name="fecha" class="form-control" required></div>

            <div class="col-md-3"><label class="form-label">Empresa</label><input type="text" name="empresa" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">ID</label><input type="text" name="id_interno" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">C.O.</label><input type="text" name="co" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Hora Reporte SALFA</label><input type="time" name="hora_reporte_salfa" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Aviso mantención (h)</label><input type="number" step="0.01" name="aviso_mantencion_h" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Llegada mantención (h)</label><input type="number" step="0.01" name="llegada_mantencion_h" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Aviso líder (h)</label><input type="number" step="0.01" name="aviso_lider_h" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Llegada líder (h)</label><input type="number" step="0.01" name="llegada_lider_h" class="form-control"></div>

            <div class="col-md-4"><label class="form-label">Tipo evento</label><input type="text" name="tipo_evento" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">Tipo actividad</label><input type="text" name="tipo_actividad" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">Fecha reporte</label><input type="date" name="fecha_reporte" class="form-control"></div>

            <div class="col-md-6"><label class="form-label">Turno recepción / ingresos</label><input type="text" name="turno_recepcion_ingresos" class="form-control"></div>
            <div class="col-12"><label class="form-label">Observaciones</label><textarea name="observaciones" class="form-control"></textarea></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ---- Extensión / Excepción ---- #}
    {% if tab=='extensiones' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Extensión / Excepción</h5>
        {{ acciones('extension_excepcion') }}
        <form method="post" action="{{ url_for('panel', tab='extensiones') }}">
          <div class="row g-3">
            <div class="col-md-3"><label class="form-label">Fecha solicitud</label><input type="date" name="fecha_solicitud" class="form-control" required></div>
            <div class="col-md-3"><label class="form-label">ID</label><input type="text" name="id_interno" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Empresa</label><input type="text" name="empresa" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">CO</label><input type="text" name="co" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Gerencia</label><input type="text" name="gerencia" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Proyecto</label><input type="text" name="proyecto" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Cant. clientes</label><input type="number" name="cant_clientes" class="form-control" min="0"></div>
            <div class="col-md-3"><label class="form-label">Aprobador</label><input type="text" name="aprobador" class="form-control"></div>

            <div class="col-md-3"><label class="form-label">Desde</label><input type="date" name="desde" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Hasta</label><input type="date" name="hasta" class="form-control"></div>
            <div class="col-12"><label class="form-label">Observación</label><textarea name="observacion" class="form-control"></textarea></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ---- Onboarding ---- #}
    {% if tab=='onboarding' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Registro onboarding</h5>
        {{ acciones('onboarding') }}
        <form method="post" action="{{ url_for('panel', tab='onboarding') }}">
          <div class="row g-3">
            <div class="col-md-4"><label class="form-label">Fecha/Hora</label><input type="datetime-local" name="fecha_hora" class="form-control" required></div>
            <div class="col-md-4"><label class="form-label">Nombre</label><input type="text" name="nombre" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">RUT</label><input type="text" name="rut" class="form-control"></div>

            <div class="col-md-4"><label class="form-label">Empresa</label><input type="text" name="empresa" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">ID</label><input type="text" name="id_interno" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">Archivo PDF (URL o ruta)</label><input type="text" name="archivo_pdf" class="form-control"></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ---- Apertura habitación ---- #}
    {% if tab=='apertura' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Apertura de habitación</h5>
        {{ acciones('apertura_habitacion') }}
        <form method="post" action="{{ url_for('panel', tab='apertura') }}">
          <div class="row g-3">
            <div class="col-md-3"><label class="form-label">Fecha</label><input type="date" name="fecha" class="form-control" required></div>
            <div class="col-md-3"><label class="form-label">Habitación</label><input type="text" name="habitacion" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Hora</label><input type="time" name="hora" class="form-control"></div>
            <div class="col-md-3"><label class="form-label">Responsable</label><input type="text" name="responsable" class="form-control"></div>

            <div class="col-12"><label class="form-label">Estado de la chapa (motivo)</label><textarea name="estado_chapa" class="form-control"></textarea></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

    {# ---- Cumplimiento EECC ---- #}
    {% if tab=='cumplimiento' %}
    <div class="card">
      <div class="card-body">
        <h5 class="card-title mb-3">Cumplimiento EECC</h5>
        {{ acciones('cumplimiento') }}
        <form method="post" action="{{ url_for('panel', tab='cumplimiento') }}">
          <div class="row g-3">
            <div class="col-md-4"><label class="form-label">Empresa</label><input type="text" name="empresa" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">N° Contrato</label><input type="text" name="n_contrato" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">C.O.</label><input type="text" name="co" class="form-control"></div>

            <div class="col-md-4"><label class="form-label">Correo electrónico</label><input type="email" name="correo_electronico" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">ID</label><input type="text" name="id_interno" class="form-control"></div>
            <div class="col-md-4"><label class="form-label">Turno</label><input type="text" name="turno" class="form-control"></div>
          </div>
          <div class="mt-3"><button class="btn btn-success" type="submit">Guardar</button></div>
        </form>
      </div>
    </div>
    {% endif %}

  </div>
</div>
{% endblock %}

